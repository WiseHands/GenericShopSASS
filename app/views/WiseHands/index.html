<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="WiseHandsMain">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<meta name="google-signin-client_id" content="226448583548-f0d5694lbcpl72juk3ul53utg6gl92hj.apps.googleusercontent.com">

	<!--[if IE]>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<![endif]-->
	<title>Wise Hands</title>
	<link href="public/css/main-style.css" rel="stylesheet" />
	<link href='http://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>


</head>
<body>
<div ng-view></div>

<script src="public/js/angular.js"></script>
<script src="public/bower_components/angular-route/angular-route.js"></script>
<script src="public/assets/plugins/jquery-1.10.2.js"></script>

<script src="public/wise_hands/js/routes/routesConfig.js"></script>

<script src="public/wise_hands/js/controllers/LoginFormController.js"></script>
<script src="public/wise_hands/js/controllers/RegisterFormController.js"></script>

<script>
	var googleUser = {};
	var startApp = function() {
		gapi.load('auth2', function(){
			// Retrieve the singleton for the GoogleAuth library and set up the client.
			auth2 = gapi.auth2.init({
				client_id: '226448583548-f0d5694lbcpl72juk3ul53utg6gl92hj.apps.googleusercontent.com',
				scope: 'profile email'
			});
			attachSignin(document.getElementById('my-signin2'));
		});
	};
	function attachSignin(element) {
		console.log(element.id);
		auth2.attachClickHandler(element, {},
				function(googleUser) {
					var profile = googleUser.getBasicProfile();
					console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
					console.log('Name: ' + profile.getName());
					console.log('Image URL: ' + profile.getImageUrl());
					console.log('Email: ' + profile.getEmail());

					$.ajax({
						type: 'POST',
						url: '/login/google?email=' + profile.getEmail(),
						contentType: 'application/octet-stream; charset=utf-8',
						success: function(result) {
							console.log(result);

						},
						processData: false
					});
				}, function(error) {
					alert(JSON.stringify(error, undefined, 2));
				});
	}
</script>

<script src="https://apis.google.com/js/platform.js?onload=startApp" async defer></script>

</body>
</html>
