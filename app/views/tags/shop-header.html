<style>
    header {
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .16), 0 2px 10px 0 rgba(0, 0, 0, .12);
        height: 54px;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0 auto;
        padding: 10px 0px;
        max-width: 900px;
    }

    .fa-stack:after {
        position: absolute;
        right: -25%;
        top: 0;
        content: attr(data-count);
        font-size: 50%;
        padding: .6em;
        border-radius: 999px;
        line-height: .75em;
        text-align: center;
        min-width: 2em;
        font-weight: bold;
        border: 1px solid red;
        background-color: red;
        color: white;
    }

    .header-left-part {
        display: flex;
        justify-content: space-between;
        align-items: center;

    }

    .shop-icon {
        margin-right: 10px;
    }

    .shop-icon img, .header-cart img {
        width: 30px;
        height: 30px;
    }

    .red-cart {
        color: #9e9e9e;

    }

    a:visited {
        color: black;
    }
    .shop-name-link{
        color: black;
    }
    #shop-name{
        margin-bottom: 0px;
        font-size: 30px;
    }
</style>
<header>
    <div class="header">
        <div class="header-left-part">
            <div class="shop-icon">
                <a href="/">
                    #{if !shop.visualSettingsDTO.shopLogo }
                        <img src="/wisehands/assets/images/wiseblack.png">
                    #{/if}
                    #{if shop.visualSettingsDTO.shopLogo }
                        <img src="/public/shop_logo/${shop.uuid}/${shop.visualSettingsDTO.shopLogo}">
                    #{/if}
                </a>
            </div>
            <a class="shop-name-link" href="/">
                <h3 id="shop-name">${shop.shopName}</h3>
            </a>
        </div>
        <!--ADMIN icon user/profile-->
        <!--SHOP NETWORK-->
        <span id="shoppingCartCounter" class="fa-stack header-cart">
            <a href="/shoppingcart">
                <i class="fa fa-stack-2x fa-inverse"></i>
                <i class="fa fa-shopping-cart fa-stack-2x red-cart"></i>
            </a>
        </span>
    </div>
</header>
<script>

    store.subscribe(() => {
        let shoppingCartState = store.getState();
        console.log("shoppingCartState from shop-header: ", store.getState());
        let cartCounter = document.querySelector('#shoppingCartCounter');
        let totalProductsQuantity = 0;
        if (shoppingCartState && shoppingCartState.items) {
            shoppingCartState.items.forEach(function (item) {
                    totalProductsQuantity += item.quantity;
                }
            );
        }
        cartCounter.setAttribute('data-count', totalProductsQuantity);
    })
</script>

