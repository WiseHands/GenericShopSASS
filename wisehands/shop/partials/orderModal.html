<div class="modal fade cart-modal" id="cart-modal-ex" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog col-xs-12 modalPosition" role="document">
        <div class="modal-content">
            <div ng-hide="modalHide" ng-init="modalHide=false">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Ваша корзина</h4>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary"
                            ng-show="selectedItems.length !== 0"
                            ng-click="getDeliveryTypes(); modalHide = !modalHide">
                        Замовити
                    </button>
                </div>
            </div>
            <div ng-show="modalHide">
                <div class="modal-header">
                    <button type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                            ng-click="modalHide = !modalHide"><span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel2"><b>Оформлення замовлення</b></h4>
                </div>
                <div class="modal-body">
                    <div class="fillingInfo" ng-hide="successfullResponse">
                        <form id="orderForm" name="orderForm" ng-submit="makeOrder(); customerData()">
                            <h6 class="deliveryType"><b>Тип доставки</b></h6>
                            <fieldset class="form-group" ng-show="deliverance.isCourierAvailable">
                                <input name="deliverance"
                                       type="radio"
                                       class="with-gap"
                                       id="radio1"
                                       ng-model="deliveryType"
                                       ng-required="!deliveryType"
                                       value="COURIER">
                                <label for="radio1"><i>{{deliverance.courierText}}</i></label>
                            </fieldset>

                            <fieldset class="form-group" ng-show="deliverance.isNewPostAvailable">
                                <input name="deliverance"
                                       type="radio"
                                       class="with-gap"
                                       id="radio2"
                                       ng-model="deliveryType"
                                       ng-required="!deliveryType"
                                       value="NOVAPOSHTA">
                                <label for="radio2"><i>{{deliverance.newPostText}}</i></label>
                                <fieldset class="form-group" ng-show="deliveryType === 'NOVAPOSHTA'">
                                    <label for="newPostDepartment" class="labelFont"><b>Введіть адресу і номер відділення Нової Пошти</b></label>
                                    <input class="validate" id="newPostDepartment" type="text" ng-model="newPostDelivery" ng-required="deliveryType === 'NOVAPOSHTA'" placeholder="м. Львів, вул.Личаківська, 8, відділення №7"/>
                                </fieldset>
                            </fieldset>

                            <fieldset class="form-group" ng-show="deliverance.isSelfTakeAvailable">
                                <input name="deliverance"
                                       type="radio"
                                       class="with-gap"
                                       id="radio3"
                                       ng-model="deliveryType"
                                       ng-required="!deliveryType"
                                       value="SELFTAKE">
                                <label class="pull-left autoHeight" for="radio3">{{deliverance.selfTakeText}}</label>
                            </fieldset>
                            <div class="form-group">
                                <b>П.І.П.</b>
                                <input class="form-control validate"
                                       id="name"
                                       ng-model="name"
                                       type="text" name="name"
                                       placeholder="Петренко Іван Григорович"
                                       pattern="^(?=.*\S).+$"
                                       required>
                            </div>

                            <div class="form-group">
                                <b>Номер телефону (380xxxxxxxxx - формат номера телефону)</b>
                                <input class="form-control validate"
                                       type="tel"
                                       id="phone"
                                       ng-model="phone"
                                       name="phone"
                                       ng-value="+380"
                                       pattern="^380[0-9]{9,9}$"
                                       required />
                            </div>
                            <div class="form-group" ng-show="deliveryType === 'COURIER'">
                                <b>Адреса</b>
                                <input class="form-control validate"
                                       g-places-autocomplete
                                       placeholder="Введіть адресу"
                                       id="address"
                                       ng-model="place"
                                       type="text"
                                       ng-required="deliveryType === 'COURIER'"/>
                            </div>
                            <div class="form-group">
                                <b>Коментар</b>
                                <textarea class="md-textarea"
                                          id="comment"
                                          placeholder="Будь-які зауваження та пропозиції залишайте тут"
                                          ng-model="comment"></textarea>
                            </div>
                            <div class="form-group" ng-show="couponsEnabled">
                                <b>Купон</b>
                                <input class="form-control validate"
                                       ng-model="couponId"
                                       id="couponId"
                                       placeholder="Введіть купон на знижку"
                                       type="text"
                                       />
                                <p ng-class="{ 'font-weight-bold' : couponPlan.minimalOrderTotal === currentPlan }" class="text-xs-center" ng-repeat="couponPlan in couponPlans">{{couponPlan.minimalOrderTotal}} грн - {{couponPlan.percentDiscount}}%<br></p>
                                <p>{{discountError}}</p>
                                <button type="button" class="btn btn-secondary waves-effect btn-block" ng-click="applyCoupon(couponId)">Застосувати купон</button>
                            </div>
                        </form>
                    </div>
                    <div id="paymentButton" class="row" ng-show="successfullResponse">
                        <div class="col-xs-12 col-sm-6 col-md-6 buyButtonBotMargin"  ng-class="{'offset-sm-3': !onlinePaymentEbabled}" ng-show="payLateButton">
                            <a><button type="button" class="btn btn-secondary waves-effect btn-block" ng-click="payLater()">Оплатити при отриманні</button></a>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-6" ng-class="{'offset-sm-2': !payLateButton}" ng-show="onlinePaymentEbabled">
                            <button type="button" class="btn btn-primary waves-effect btn-block" ng-click="payOrder()">Оплатити</button>
                        </div>
                        <div id="payButton" class="proceedWithPayment"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-xs-7 priceAlignment">
                            <h4 class="modal-total pull-left"><strong>{{total + delivery()}} грн</strong></h4>
                        </div>
                        <div class="col-xs-5" ng-hide="successfullResponse">
                            <button id="toPayment" type="submit" class="btn btn-primary pull-right" ng-hide="loading" form="orderForm">До Оплати </button>
                            <spinner class="center-block spinnerCentering landscapeFloatRight" name="mySpinner" img-src="wisehands/assets/images/spinner/box-xs.gif" show="loading"></spinner>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
