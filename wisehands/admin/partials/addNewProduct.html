<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
    .images-container {
        flex: 50%;
        height: 525px;
        margin: 1rem;
        cursor: pointer;
        padding: 0;
        position: relative;
    }

    .load-product-image-border {
        border: 2px dotted #666;
    }

    .load-product-image {
        height: 100%;
        display: flex;
        justify-content: center;
    }

    .image-help-info-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        align-self: center;
    }

    input[type=file] {
        display: none;
    }

    .imageFlex {
        height: 150px;
        width: 150px;
    }
</style>
<nav class="admin-nav" role="navigation">
    <a class="admin-nav-back-btn"
       type="button"
       href="#/products">
        <i class="fa fa-arrow-circle-left whiteColor pull-left"></i>
    </a>
    <div class="nav-title">
        <h5>{{'addNewProduct.add' | translate}}</h5>
    </div>
    <div class="admin-nav-save-btn">
        <button class="fa fa-save whiteColor pull-right saveProductButtonStyling"
                type="submit"
                form="addNewProductForm">
        </button>
    </div>
</nav>

<div class=" noSidePadding">
    <div class="row text-center">
        <spinner class="center-block" name="mySpinner" img-src="wisehands/assets/images/spinner/box.gif"
                 show="loading"></spinner>
    </div>


    <form class="add-product-block noSidePadding" ng-submit="submitProduct()" id="addNewProductForm"
          name="addNewProductForm" ng-hide="loading">

        <input name="imageLoader" type="file" id="imageLoader"/>

        <div ng-class="{'load-product-image-border' : !imageToCrop}" class="images-container">
            <image-cropper-component ng-if="imageToCrop"
                                     current-image="imageToCrop"></image-cropper-component>
            <div class="load-product-image" ng-hide="imageToCrop"
                 ng-click="loadImage()">

                <div class="image-help-info-container">
                    <i id="add-product-icon" class="fa fa-plus"></i>
                    <p class="add-photo-text" ng-hide="imageToCrop">{{'addNewProduct.addPhoto' |
                        translate}}</p>
                    <p class="error-text">{{'addNewProduct.errorLoadPhoto' | translate}}</p>
                </div>

            </div>
            <ul class="images-list" ng-show="productImages.length">
                <li class="imageFlex" ng-repeat="image in productImages"
                    ng-class="{'active' : $index === product.mainPhoto}">
                    <img ng-src="{{image}}"
                         class="images-list-img"
                         title="{{'addNewProduct.makeMain' | translate}}"
                         ng-click="setMainPhotoIndex($index); $event.stopPropagation();">
                    <div class="label secondaryColor photoLabelStyle hoverable"
                         title="{{'addNewProduct.deletePhoto' | translate}}"
                         ng-click="removeImage($index); $event.stopPropagation();">
                        <span class="secondaryColor glyphicon glyphicon-remove-sign"></span>
                    </div>
                </li>
            </ul>
        </div>

        <div class="add-product-info">
            <div class="admin-card hoverable">
                <h4>{{'editProduct.general' | translate}}</h4>
                <div class="input-field m-left">
                    <input id="product_price" type="number" step="0.01" ng-model="product.price" required>
                    <label for="product_price">{{'addNewProduct.productPrice' | translate}}</label>
                </div>
            </div>
            <div class="admin-card hoverable">
                <h4>{{'translationPage.title' | translate}}</h4>
                <h5>{{'translationPage.ukrainian' | translate}}</h5>
                <div class="input-field m-left">
                    <input id="nameUk" type="text" ng-model="product.nameUk" required>
                    <label for="nameUk">{{'addNewProduct.productName' | translate}}</label>
                </div>
                <div class="input-field m-left">
                    <textarea id="descriptionUk" class="materialize-textarea" ng-model="product.descriptionUk"
                              required></textarea>
                    <label for="descriptionUk">{{'addNewProduct.productDescription' | translate}}</label>
                </div>
                <h5>{{'translationPage.english' | translate}}</h5>
                <div class="input-field m-left">
                    <input id="nameEn" type="text" ng-model="product.nameEn" required>
                    <label for="nameEn">{{'addNewProduct.productName' | translate}}</label>
                </div>
                <div class="input-field m-left">
                    <textarea id="descriptionEn" class="materialize-textarea" ng-model="product.descriptionEn"
                              required></textarea>
                    <label for="descriptionEn">{{'addNewProduct.productDescription' | translate}}</label>
                </div>
            </div>
            <div class="add-product-select-category">
                <div class="input-field">
                    <h4 class="m-left">{{'addNewProduct.category' | translate}}</h4>
                    <p class="m-left" id="error-select-category">{{'addNewProduct.errorChooseCategory' | translate}}</p>
                    <div class="add-product-category">
                        <div class="create-category hoverable" data-toggle="modal" data-target="#categoryModal">
                            <i class="fa fa-plus-circle" aria-hidden="true"></i>
                        </div>
                        <div class="item-category"
                             ng-repeat="category in categories | limitTo : NumberOfCategoriesToShow"
                             ng-class="{selected: category.uuid === selectedCategoryId}">
                            <div class="card-item hoverable" ng-click="chooseCategory(category.uuid)"
                                 title="{{category.name}}">
                                <p>{{category.name}}</p></div>
                        </div>
                        <div class="show-category" ng-hide="categories.length < 7">
                            <p class="show-more-btn" ng-click="showMore()" ng-show="categories.length > 6">
                                {{'addNewProduct.showMoreButton' | translate}}</p>
                            <p class="show-less-btn" ng-click="showLess()">{{'addNewProduct.showLessButton' |
                                translate}}</p>
                        </div>
                    </div>

                </div>
                <div class="admin-card hoverable">
                    <h4>{{'editProduct.properties' | translate}}</h4>
                    <input type="checkbox" class="filled-in checkBoxStyling" id="filled-in-box"
                           ng-model="product.isActive"/>
                    <label for="filled-in-box">{{'addNewProduct.showInShop' | translate}}</label>
                    <div class="input-field">
                        <input id="oldPrice" type="number" ng-model="product.oldPrice">
                        <label for="oldPrice" class="active">{{'addNewProduct.oldPrice' | translate}}</label>
                    </div>
                    <div class="input-field ">
                        <input id="productOrder" type="number" ng-model="product.sortOrder">
                        <label for="productOrder" class="active">{{'displayOrder' | translate}}</label>
                    </div>
                </div>
                <button class="save-button"
                        type="submit"
                        form="addNewProductForm">
                    {{'addNewProduct.save' | translate}}
                </button>
            </div>
        </div>
    </form>

</div>

<div class="modal fade" id="categoryModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <form name="categoryForm" ng-submit="createCategory()">
                    <div class="row">
                        <div class="input-field col-md-12">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <input id="password" type="text" ng-model="newCategory.name" required>
                            <label for="password">{{'categories.categoryName' | translate}}</label>
                        </div>
                        <div class="input-field col-md-12">
                            <textarea id="textarea2" class="materialize-textarea"
                                      ng-model="newCategory.description"></textarea>
                            <label for="textarea2">{{'categories.categoryDescription' | translate}}</label>
                        </div>
                        <spinner class="col-xs-offset-11" name="mySpinner"
                                 img-src="wisehands/assets/images/spinner/box-xs.gif" show="loading"></spinner>
                        <button type="submit" class="btn secondaryColor white-text waves-effect waves-light pull-right"
                                ng-hide="loading">{{'categories.create' | translate}}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>